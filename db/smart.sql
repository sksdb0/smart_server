/*SQLyog Ultimate v8.53 MySQL - 5.7.9 : Database - smart**********************************************************************//*!40101 SET NAMES utf8 */;/*!40101 SET SQL_MODE=''*/;/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;DROP DATABASE IF EXISTS `smart`;CREATE DATABASE /*!32312 IF NOT EXISTS*/`smart` /*!40100 DEFAULT CHARACTER SET utf8 */;USE `smart`;/*Table structure for table `smart_center_t` */DROP TABLE IF EXISTS `smart_center_t`;CREATE TABLE `smart_center_t` (  `center_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '中心ID',  `center_sn` varchar(20) NOT NULL COMMENT '中心序列号',  `center_password` varchar(20) NOT NULL COMMENT '设备密码',  `center_name` varchar(50) DEFAULT NULL COMMENT '中心名称',  PRIMARY KEY (`center_id`),  UNIQUE KEY `center_sn` (`center_sn`)) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 COMMENT='中心表';/*Data for the table `smart_center_t` */insert  into `smart_center_t`(`center_id`,`center_sn`,`center_password`,`center_name`) values (10,'center01','111111','XP家'),(11,'center02','111111','公司'),(12,'center03','111111','阿迪家');/*Table structure for table `smart_device_switch_log_t` */DROP TABLE IF EXISTS `smart_device_switch_log_t`;CREATE TABLE `smart_device_switch_log_t` (  `log_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',  `switch_id` int(11) NOT NULL COMMENT '开关ID',  `user_id` int(11) NOT NULL COMMENT '操作用户',  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '操作时间',  `channel` int(1) NOT NULL COMMENT '操作线路',  `event` tinyint(1) NOT NULL COMMENT '操作事件|1:开 0:关',  PRIMARY KEY (`log_id`)) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8 COMMENT='开关--日志表';/*Data for the table `smart_device_switch_log_t` */insert  into `smart_device_switch_log_t`(`log_id`,`switch_id`,`user_id`,`time`,`channel`,`event`) values (13,1,1,'2016-04-21 17:12:35',1,1),(14,1,1,'2016-04-21 17:13:04',2,1),(15,1,1,'2016-04-21 17:13:15',1,0),(16,1,2,'2016-04-21 17:13:33',1,1);/*Table structure for table `smart_device_switch_quartz_t` */DROP TABLE IF EXISTS `smart_device_switch_quartz_t`;CREATE TABLE `smart_device_switch_quartz_t` (  `quartz_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '定时ID',  `switch_id` int(11) NOT NULL COMMENT '开关ID',  `time_rule` varchar(50) NOT NULL COMMENT '定时规则',  `channel` int(1) NOT NULL COMMENT '操作线路',  `event` tinyint(1) NOT NULL COMMENT '操作事件|1:开 0:关',  `is_enable` tinyint(1) NOT NULL DEFAULT '1' COMMENT '是否启用|1:启用 0:停用',  PRIMARY KEY (`quartz_id`)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='开关--定时表';/*Data for the table `smart_device_switch_quartz_t` */insert  into `smart_device_switch_quartz_t`(`quartz_id`,`switch_id`,`time_rule`,`channel`,`event`,`is_enable`) values (1,1,'0 0 12 * * ?',1,1,1),(2,2,'0 0 12 * * ?',2,1,1);/*Table structure for table `smart_device_switch_t` */DROP TABLE IF EXISTS `smart_device_switch_t`;CREATE TABLE `smart_device_switch_t` (  `switch_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '开关ID',  `switch_sn` varchar(20) NOT NULL COMMENT '开关序列号',  `switch_type` int(4) unsigned zerofill NOT NULL COMMENT '开关类型||见字典01',  `switch_name` varchar(50) DEFAULT NULL COMMENT '开关名称',  `center_id` int(11) NOT NULL COMMENT '所属的中心设备',  PRIMARY KEY (`switch_id`),  UNIQUE KEY `switch_sn` (`switch_sn`)) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 COMMENT='开关--设备表';/*Data for the table `smart_device_switch_t` */insert  into `smart_device_switch_t`(`switch_id`,`switch_sn`,`switch_type`,`switch_name`,`center_id`) values (1,'K0001',0102,'卫生间',10),(2,'K0002',0101,'床头',10),(3,'K0003',0101,'主卧',10),(4,'K0004',0104,'客厅',10),(5,'K0005',0104,NULL,11),(6,'K0006',0103,NULL,11),(7,'K0007',0102,NULL,11),(8,'K0008',0102,NULL,11),(9,'K0009',0101,NULL,11),(10,'K0010',0104,NULL,12),(11,'K0011',0104,NULL,12),(12,'K0012',0103,NULL,12);/*Table structure for table `smart_device_type_t` */DROP TABLE IF EXISTS `smart_device_type_t`;CREATE TABLE `smart_device_type_t` (  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',  `code` int(4) unsigned zerofill NOT NULL COMMENT '代码|前两位是设备类 后两位是编号',  `value` varchar(50) NOT NULL COMMENT '值',  `parent` int(4) unsigned zerofill NOT NULL COMMENT '父类',  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建日期',  `modify_date` timestamp NULL DEFAULT NULL COMMENT '修改日期',  `description` text COMMENT '备注说明',  PRIMARY KEY (`id`),  UNIQUE KEY `code` (`code`)) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COMMENT='设备类型字典表';/*Data for the table `smart_device_type_t` */insert  into `smart_device_type_t`(`id`,`code`,`value`,`parent`,`create_date`,`modify_date`,`description`) values (1,0100,'开关',0000,'2016-04-24 03:07:18',NULL,NULL),(2,0101,'单路开关',0100,'2016-04-21 14:35:41',NULL,NULL),(3,0102,'双路开关',0100,'2016-04-21 14:43:46',NULL,NULL),(4,0103,'三路开关',0100,'2016-04-21 14:44:03',NULL,NULL),(5,0104,'四路开关',0100,'2016-04-21 14:44:20',NULL,NULL),(6,0200,'遥控',0000,'2016-04-24 03:07:40',NULL,NULL),(7,0201,'制冷遥控',0200,'2016-04-21 14:54:01',NULL,NULL),(8,0202,'加热遥控',0200,'2016-04-21 14:54:32',NULL,NULL);/*Table structure for table `smart_user_center_r` */DROP TABLE IF EXISTS `smart_user_center_r`;CREATE TABLE `smart_user_center_r` (  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '关系ID',  `user_id` int(11) NOT NULL COMMENT '用户ID',  `center_id` int(11) NOT NULL COMMENT '中心ID',  PRIMARY KEY (`id`),  UNIQUE KEY `user_center` (`user_id`,`center_id`)) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8 COMMENT='用户与中心关系表';/*Data for the table `smart_user_center_r` */insert  into `smart_user_center_r`(`id`,`user_id`,`center_id`) values (12,1,10),(13,1,11),(14,2,11),(15,2,12);/*Table structure for table `smart_user_t` */DROP TABLE IF EXISTS `smart_user_t`;CREATE TABLE `smart_user_t` (  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户ID',  `username` varchar(20) NOT NULL COMMENT '用户名称',  `password` varchar(32) NOT NULL COMMENT '用户密码',  `phone` varchar(13) NOT NULL COMMENT '手机号码',  `email` varchar(50) NOT NULL COMMENT '邮箱账号',  PRIMARY KEY (`id`),  UNIQUE KEY `username` (`username`),  UNIQUE KEY `phone` (`phone`)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='用户表';/*Data for the table `smart_user_t` */insert  into `smart_user_t`(`id`,`username`,`password`,`phone`,`email`) values (1,'xp','7731939xp','13683330861','sksdb0@163.com'),(2,'ad','110031ad','13940089400','379133291@qq.com');/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;